<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12">
		<div class="box box-primary">
			<div class="box-header">
				<h3 class="box-title">#i18n{library.manage_mappings.form.create.title}</h3>
				<div class="box-tools">
					<form class="form-inline pull-right" action="jsp/admin/plugins/library/CreateMapping.jsp" method="post" >
						<input type="hidden" name="media_id" value="${media.mediaId}">
						<label for="document_type" >#i18n{library.manage_mappings.form.create.documentType}</label>
						<div class="input-group">
							<@comboWithParams name="document_type" default_value="" additionalParameters=" class=\"form-control input-xs\"" items=document_type_list />
							<span class="input-group-btn">
								<button class="btn btn-primary btn-xs btn-flat" type="submit">
									<i class="fa fa-check"></i>&nbsp;#i18n{library.manage_mappings.form.create.validate}
								</button>
							</span>
						</div>
						<a class="btn btn-default btn-xs btn-flat" style="color:#000;" href="jsp/admin/plugins/library/ManageMedia.jsp?media_id=${media.mediaId}">
							<span class="fa fa-close"></span> #i18n{library.manage_mappings.action.back}
						</a>
					</form>
				</div>
			</div>
			<div class="box-body table-responsive">
				</fieldset>
				<#if mapping_list?has_content>
				   <table class="table table-hover table-condensed">
					<tr>
					  <th>#i18n{library.manage_mappings.table.column.title.type}</th>
					  <th>#i18n{library.manage_mappings.table.column.title.mappings}</th>
					  <th>#i18n{library.manage_mappings.table.column.title.comments}</th>
					  <th>#i18n{library.manage_mappings.table.column.title.actions}</th>
					</tr>
						<#list mapping_list as mapping >
						<tr>
							<td>${mapping.codeDocumentType}</td>
							<td>
								<#if mapping.attributeAssociationList?has_content>
									<#assign attributeAssociationLength = mapping.attributeAssociationList?size />
									<#list mapping.attributeAssociationList as mappingAttribute >
										${mappingAttribute.associationLabel}<br/>
									</#list> 	
								<#else>
									<#assign attributeAssociationLength = 0 />
								</#if>
							</td>
							<td>
								<#assign nbAttributesToMap = 0 >  
								<#list media.mediaAttributeList as attribute >
									<#if attribute.associableWithDocument >
										<#assign nbAttributesToMap = nbAttributesToMap + 1>
									</#if>
								</#list> 
								<#if attributeAssociationLength < nbAttributesToMap >
									<span class="label label-warning">#i18n{library.manage_mappings.control.title} : #i18n{library.manage_mappings.control.text}</span>
								</#if>
							</td>
							<td>
								<a class="btn btn-primary btn-flat btn-xs" href="jsp/admin/plugins/library/ModifyMapping.jsp?mapping_id=${mapping.idMapping}"  title="#i18n{portal.util.labelModify}" >
									<i class="fa fa-pencil"></i>
								</a>
								<a class="btn btn-danger btn-flat btn-xs" href="jsp/admin/plugins/library/RemoveMapping.jsp?mapping_id=${mapping.idMapping}"  title="#i18n{portal.util.labelDelete}" >
									<i class="fa fa-trash"></i>
								</a>
							</td>
						</tr>
						</#list>
					</table>
				</#if>
			</div>
		</div>
	</div>
</div>
