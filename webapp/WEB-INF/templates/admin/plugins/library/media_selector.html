<div class="insert-service">
<h4>#i18n{library.insertservice.selectMedia} ${mediatype.name}</h4>
<form class="form" method="post" name="filter" action="jsp/admin/plugins/library/SelectMedia.jsp">
<div class="clearfix">
${spaces_browser}
</div>
<input type="hidden" name="plugin_name" value="${plugin_name}" />
<input type="hidden" name="input" value="${input}" />
<input type="hidden" name="media_type" value="${mediatype.mediaId}" />
<#-- LUTECE-1108: Use Freemarker comments to disable #i18n lookup. -->
<#-- input type="submit" value="#i18n{library.insertservice.filter.button}" class="btn btn-primary" /> -->
</form>
<form class="form" method="post" name="pagination" action="jsp/admin/plugins/library/SelectMedia.jsp">
	<input type="hidden" name="plugin_name" value="${plugin_name}" />
	<input type="hidden" name="input" value="${input}" />
	<input type="hidden" name="media_type" value="${mediatype.mediaId}" />
	<input type="hidden" name="space_id" value="${selected_space}" />
    <@pagination paginator=paginator />
    #i18n{library.insertservice.nbitemsperpage} :
    <select name="nb_items" class="input-mini">
        <#list [ 10 , 20 , 50 , 100 ] as nb>
        <#if nb_items = nb >
        <option selected="selected" value="${nb}">${nb}</option>
        <#else>
        <option value="${nb}">${nb}</option>
        </#if>
        </#list>
    </select>
   <button class="btn btn-primary btn-mini" type="submit" title="#i18n{library.insertservice.buttonItemsPerPage}"><i class="icon-ok icon-white"></i></button>
</form>
<form class="form" method="post" name="fenvoi" action="jsp/admin/plugins/library/EditSelectedMedia.jsp">
	<fieldset>
	<input type="hidden" name="plugin_name" value="${plugin_name}" />
	<input type="hidden" name="input" value="${input}" />
	<input type="hidden" name="media" value="${mediatype.mediaId}" />
	<input type="hidden" name="id_document" value="" />
	<input type="hidden" name="id_mapping" value="" />
	<table class="table table-striped table-condensed">
	<tr>
		<th colspan="2">#i18n{library.insertservice.header.name}</th>
	<#assign hashAttributes = {} />
	<#list media_attributes as attribute>
		<#assign hashAttributes = hashAttributes + { attribute.code:attribute.typeId } />
		<th>${attribute.description}</th>
	</#list>
	</tr>
	<#list all_documents as mappingdocument>
		<#assign mapping_id = mappingdocument.first />
		<#assign document = mappingdocument.second />
		<tr>
			<td>
				
				<a class="btn btn-mini" href="javascript:document.fenvoi.id_mapping.value=${mapping_id}; document.fenvoi.id_document.value='${document.id}'; document.fenvoi.submit();"  title="#i18n{library.create_media.button.validate}" >
					<i class="icon-ok-circle"></i>
				</a>
				&nbsp;${document.title}
			</td>
			<td>
			<img class="img-polaroid thumblist-wide" src="${document.thumbnail}"/></td>
			<#list media_attributes as attribute>
				<td>
				<#assign attributes_associations = all_attributes_associations[mapping_id] />
				<#if attributes_associations[attribute.code]?has_content>
					<#assign doctype_code = attributes_associations[attribute.code]>
					<#if hashAttributes[attribute.code] = 0>
						<!-- ATTRIBUTE_TYPE_TEXT_USER -->
					<#elseif hashAttributes[attribute.code] = 1> 
						<!-- ATTRIBUTE_TYPE_TEXT_DOCUMENT -->
						<#if (document.getAttribute(doctype_code).textValue)?has_content >
							${document.getAttribute(doctype_code).textValue}
						</#if>
					<#elseif hashAttributes[attribute.code] = 2>
						<!-- ATTRIBUTE_TYPE_BINARY -->
						<#if (document.getAttribute(doctype_code))?has_content >
							<#assign attributeId = document.getAttribute(doctype_code).id >
							<#assign url = "document?id=" + document.id + "&amp;id_attribute=" + attributeId >
							<a class="btn btn-primary btn-mini" href="${url}"  title="#i18n{library.insertservice.clicktopreview}" >
								<i class="icon-eye-open icon-white"></i>
							</a>
							&nbsp;#i18n{library.insertservice.clicktopreview}
						</#if>
					</#if>
				</#if>
				</td>
			</#list>
		</tr>
	</#list>
	</table>
</form>
</div>
